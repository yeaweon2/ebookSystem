<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.ebook.prj.cmmnty.mapper.CmmntyMapper">

	<!-- 211018 공지사항전체조회  -->
	<select  id="cmmntyList" resultType="co.ebook.prj.cmmnty.vo.CmmntyVO">
		SELECT rownum as cmmnty_no,
			   CMMNTY_ID,
			   CMMNTY_TITLE || '('|| CMMNTY_REPLY_CNT || ')' as CMMNTY_TITLE,
		 	   CMMNTY_WRITER,
			   INS_DT,
			   CMMNTY_hit,
			   CMMNTY_ATCH_NM
			   CMMNTY_ATCH_PATH
		FROM COMMUNITY
		WHERE CMMNTY_FL_CD = #{cmmntyFlCd}
		ORDER BY cmmnty_no desc

	</select>
	
	<!-- 211019 공지사항세부조회 -->
	<select id="cmmntySelectList" resultType="co.ebook.prj.cmmnty.vo.CmmntyVO">
		SELECT CMMNTY_TITLE,
			   CMMNTY_CONTENTS,
			   CMMNTY_WRITER,
			   CMMNTY_HIT,
			   INS_DT,UDT_DT
		  FROM community
		 WHERE CMMNTY_FL_CD = #{cmmntyFlCd}
		   AND CMMNTY_ID = #{cmmntyId}
	</select>
	
	<!-- 211019 공지사항 글쓰기입력 -->
	<insert id="cmmntyInsert" parameterType="co.ebook.prj.cmmnty.vo.CmmntyVO">
		INSERT INTO COMMUNITY(
		  CMMNTY_ID,		CMMNTY_WRITER,
		  CMMNTY_TITLE,		CMMNTY_FL_CD,
		  CMMNTY_CONTENTS,	CMMNTY_HIT,
		  INS_DT,			UDT_DT,
		  CMMNTY_ATCH_NM,	CMMNTY_ATCH_PATH
		)
		VALUES (
		 C_SEQ.nextval,		#{cmmntyWriter},
		 #{cmmntyTitle},	#{cmmntyFlCd},
		 #{cmmntyContents},	default,
		 sysdate,			sysdate,
		 null,				null)
	</insert>
	
	<!--  211020 공지사항 글쓰기삭제 -->
	<update id="cmmntyDelete" parameterType="co.ebook.prj.cmmnty.vo.CmmntyVO">
		UPDATE COMMUNITY
		   SET CMMNTY_DELYN = 'Y'
		 WHERE CMMNTY_ID = #{cmmntyId}
	</update>
	<!--  211020 공지사항 글쓰기수정 -->
	<update id="cmmntyUpdate"></update>
	<!--  211020 공지사항 글쓰기 조회수 -->
	
</mapper>